<!DOCTYPE html>

<head>
    <title>Filterbank</title>
</head>

<body style="background-color:dimgrey;">
    <input type="file" accept="image/*" onchange="loadFile(event)">
    <br>
    <button type="button" onclick="drawImage()">Draw Original</button>
    <button type="button" onclick="invert()">Invert</button>
    <button type="button" onclick="grayscale()">Grayscale</button>
    <button type="button" onclick="filterbank()">Filterbank-Todo</button>
    <br>
    <canvas id="canvas"></canvas>

    <script>
        // +------------------+
        // | Global Variables |
        // +------------------+
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        var img = new Image();
        var data;
        var imageData;
        var singleValues = [];
        // +-----------+
        // | Functions |
        // +-----------+
        function loadFile(event) {
            img.src = URL.createObjectURL(event.target.files[0]);
        };

        function drawImage() {
            canvas.height = img.height;
            canvas.width = img.width;
            ctx.drawImage(img, 0, 0);
        };

        function refreshData() {
            imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            data = imageData.data;
        };

        function invert() {
            refreshData();
            for (var i = 0; i < data.length; i += 4) {
                data[i] = 255 - data[i]; // red
                data[i + 1] = 255 - data[i + 1]; // green
                data[i + 2] = 255 - data[i + 2]; // blue
            }
            ctx.putImageData(imageData, 0, 0);
        };

        function grayscale() {
            refreshData();
            for (var i = 0; i < data.length; i += 4) {
                avg = (data[i] + data[i + 1] + data[i + 2]) / 3;
                data[i] = avg;
                data[i + 1] = avg;
                data[i + 2] = avg;
            }
            ctx.putImageData(imageData, 0, 0);
        };

        function filterbank() {
            // Only use grayscaled images
            grayscale();
            // filterbank code
            
        };

    </script>
</body>
